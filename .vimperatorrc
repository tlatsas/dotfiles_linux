"
" ~/.vimperatorrc
"

set noscrollbars
set titlestring=''

" search - google search without auto-completion
" see: ~/.pentadactyl/search/googlenc.xml
set ds=googlenc

" A bit.ly shortener for pentadactyl adapted for vimperator
" source : http://bit.ly/rbz0nr
:js <<_EOJS_
    bitly = function(url) {
        var req = new XMLHttpRequest();
        req.open("GET", "http://api.bit.ly/v3/shorten?login=blueyed&apiKey=R_a405dd06737e888ca6971b295b0b7a13&format=txt&longUrl=" + encodeURIComponent(url), true)
        req.onreadystatechange = function (ev) {
            if (req.readyState == 4) {
                if (req.status == 200) {
                    var short_url = req.responseText.replace(/\s+$/, '');
                    util.copyToClipboard(short_url);
                    liberator.echo(short_url);
                }
                else {
                    liberator.echoerr(req.responseText);
                }
            }
        }
        req.send(null);
    }
_EOJS_

" see your puclic ip address in pentadactyl
" (I use my own service see: tlatsas/ipz @github)
:js <<_EOJS_
    ip = function() {
        var req = new XMLHttpRequest();
        req.open('GET', 'http://ipz.herokuapp.com/', true);

        req.onreadystatechange = function (ev) {
            if (req.readyState == 4) {
                try {
                    liberator.echo(req.responseText);
                }
                catch (err) {
                    liberator.echoerr(err);
                }
            }
        }
        req.send(null);
    }
_EOJS_

" map custom javascript functions
command! bitly js bitly(buffer.URL)
map <silent> gy :bitly<CR>
command! ip js ip()
command! date echo Date()

" dark color theme
colorscheme vimPgray

" change highlight color to avoid excessive eye-burning
highlight HintElem background-color: #698A8A; color: black !important;

" align URL to the left
"autocmd VimperatorEnter js highlight.set('StatusLine', 'text-align: start')

" vim: set ft=vim:
