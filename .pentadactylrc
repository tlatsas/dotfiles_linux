" ====================
"  pentadactyl config
" ====================

loadplugins '\.(js|penta)$'
group user

set guioptions=Cs

colorscheme desert

" flash block allow list
set fbw=google.com,linux.com,github.com

" search
"
" you need to bookmark google without competion
" :bmark http://www.google.com/search?sclient=psy&hl=en&complete=0&site=webhp&source=hp&q=%s -keyword gg
set ds=gg

command -nargs=* g tabopen google <args>
command -nargs=* d tabopen https://duckduckgo.com?q=<args>

" other
command date echo Date()


" A builtin bit.ly shortener.
" Based on http://github.com/scy/dotscy/commit/4526f23a09b2ae51fb7f4b1e2ed3aec84f318fa5
" source : http://bit.ly/rbz0nr
javascript <<EOF
    function shortenURLBitLy (url) {
        var req = new XMLHttpRequest();
        req.open("GET", "http://api.bit.ly/v3/shorten?login=blueyed&apiKey=R_a405dd06737e888ca6971b295b0b7a13&format=txt&longUrl=" + encodeURIComponent(url), true)
        req.onreadystatechange = function (ev) {
            if (req.readyState == 4) {
                if (req.status == 200) {
                    dactyl.clipboardWrite(req.responseText.replace(/\s+$/, ''), true);
                }
                else {
                    dactyl.echo(req.responseText);
                }
            }
        }
        req.send(null);
    }
EOF
map -silent gy -js shortenURLBitLy(buffer.URL)

" vim: set ft=vim:
